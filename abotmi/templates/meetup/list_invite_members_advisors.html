{% extends 'meetup/meetup_base.html' %}
{% block top_header %}
    {{ block.super }}
{% endblock %}
{% block top_menu_bar %}
    {{ block.super }}
{% endblock %}
{% block slider %}
{% endblock %}
{% block important_scripts %}
    {{ form.media }}
{% endblock %}
{% block important_css %}
       <link rel="stylesheet" href="/static/css/meetup.css" type="text/css">
       <link href="/static/admin_theme/plugins/datatables/dataTables.bootstrap.css"
            rel="stylesheet" type="text/css" />
{% endblock %}
{% block custom_theme_css %}
   {{block.super}}
    <style type="text/css">
        .invitaion-section-div{
            margin-top: 100px; } 
        .btn-top{padding-top: 10px;}
        .invitaion-section-div .n-margin-lr-0:first-child {
            background: #334492;
            color: #fff;
            padding: 5px 10px 0px;
        }
        .invitaion-section-div .n-margin-lr-0:last-child .dataTables_paginate{
            text-align: right;
        }
        .invitaion-section-div .n-margin-lr-0:last-child .dataTables_paginate ul{
            margin: 0px 0px;
        }
        .invitaion-section-div .n-margin-lr-0:last-child .dataTables_paginate ul .active a{
            background: #334492;
            border-color: #334492;
        }
        .invitaion-section-div #table_id_filter{
            text-align: right;
        }
        .invitaion-section-div #table_id_filter select.input-sm{
            margin: 0px 10px;
        }
        .invitaion-section-div #table_id_filter input{
            margin: 0px 0px 0px 10px;
        }
        .invitaion-section-div .table-responsive{
            overflow: hidden;
        }
        .email-list-align span input{
            position: relative;
            top: 3px;
        }
    </style>
{% endblock %}
{% block main_content %}
    <section class="subpage-reia-primary n-margin-top-100" id="about">
        <div class="container parent-section">
        <div class="row n-margin-0">
            <div class="col-md-offset-1 col-md-10 invitaion-section-div">
                <form action="{% url 'meetup:send_meetup_invitation' %}"
                                    name='frm_meetup_invitation' method="post" id="meetup_form">{% csrf_token %}
                {% if view_members or user_profile_obj %}
                <div class="bs-example">
                    <div class="table-responsive">
                        <table id="table_id" name="table_id" class="table table-bordered email-list-align">
                            <thead>
                                <tr>
                                    <th>
                                       <span><input type="checkbox" id="select_all"/> Email ID</span>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                {% if view_members %}
                                    {% for user_profile_data in view_members %}
                                    <tr>
                                        <td>
                                            <span><input type="checkbox" class="email_check_box" name="email_list" value="{{ user_profile_data.first_name }},{{ user_profile_data.email }},
                                            {{ user_profile_data.mobile }}"/> {{ user_profile_data.email }}</span>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                {% endif %}
                                {% if user_profile_obj %}
                                    {% for user_profile_data in user_profile_obj %}
                                    <tr>
                                        <td>
                                            <span><input type="checkbox" class="email_check_box" name="email_list" value="{{ user_profile_data.name }},{{ user_profile_data.email }},
                                            {{ user_profile_data.mobile }}"/> {{ user_profile_data }}</span>
                                        </td>
                                    </tr>
                                    {% endfor%}
                                {% endif %}
                            </tbody>
                        </table>
                    </div>
                    <div class="row text-center btn-top">
                        <button type="button" onclick="validate_send_invitation()" class="btn upwrdz-button">Send Invitation</button>
                    </div>
                </div>
                {% else %}
                    <p><center>No one found.</center></p>
                    <center><a class="btn upwrdz-button" href="/meetup/list_meetup_events/">BACK</a></center>
                {% endif %}
            </form>
            </div>
        </div>
        </div>
    </section>
{% endblock %}
{% block scripts %}
<script src="/static/admin_theme/plugins/datatables/jquery.dataTables.js"
        type="text/javascript"></script>
<script src="/static/admin_theme/plugins/datatables/dataTables.bootstrap.js"
        type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            $('#table_id').dataTable({
                "orderFixed": [ 0, 'asc' ]
            });
            row_ids = $("#table_id_wrapper").find('.row');
            for (i=0; i < row_ids.length; i++){
                $("."+row_ids[i].className).addClass('n-margin-lr-0');
            }
        });
    </script>
    <script language="javascript">
    // add multiple select / deselect functionality
    var select_all_button = $("#select_all");
    select_all_button.click(function() {
        var status = this.checked;
        $('.email_check_box').each(function(){
            this.checked = status;
        });
    });
    $(".email_check_box").click(function(){
        if($(".email_check_box").length == $(".email_check_box:checked").length) {
            select_all_button.prop("checked", true);
        } else {
            select_all_button.prop("checked", false);
        }
    });
    </script>
    <script type="text/javascript">
        function validate_send_invitation() {
            var mycheckbox = $('.email_check_box:checked').length;
            if(mycheckbox > 0){
                $('#meetup_form').submit();
            }else {
                alert("please select atleast one Email ID ");
                return false;
            }
        }
    </script>
{% endblock%}
{% block footer %}
    {{ block.super }}
{% endblock %}
{% block theme_scripts %}
    {{block.super}}
{% endblock %}
